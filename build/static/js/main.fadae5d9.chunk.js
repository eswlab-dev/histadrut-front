(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[1],{19:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"d",(function(){return d})),t.d(n,"c",(function(){return f})),t.d(n,"b",(function(){return v}));var r=t(2),a=t.n(r),c=t(6),o=t(10),u=t.n(o),i="https://d4eb-2a0e-9cc0-23f4-d00-fce6-3347-eae8-4c60.eu.ngrok.io";function s(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(a.a.mark((function e(n){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h(n),console.log("addBoardRestriction -> filteredRestriction",t),e.next=4,u.a.post("".concat(i,"/restriction/board"),t);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(n){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("".concat(i,"/restriction/account/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,n){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(n,t){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.account=t,r=h(n),console.log("editRestriction -> filteredRestriction",r),console.log("editRestriction -> restriction",n),e.next=6,u.a.put("".concat(i,"/restriction/board"),r);case 6:return c=e.sent,console.log("editRestriction -> edited",c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(n){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n._id,e.next=3,u.a.delete("".concat(i,"/restriction/board/").concat(t));case 3:return r=e.sent,console.log("deleteRestriction -> deleted",r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){var n={accountId:e.accountId||e.account,boardId:Number(e.board.value),columnIds:e.columns.map((function(e){return e.value})),_id:e._id};return console.log("filterRestriction -> filteredRestriction",n),n}},44:function(e,n,t){e.exports=t(95)},49:function(e,n,t){},51:function(e,n,t){},95:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(23),o=t.n(c),u=(t(49),t(12)),i=t(2),s=t.n(i),l=t(21),d=t(22),p=t(6),f=t(5),b=(t(51),t(42)),v=t.n(b),m=(t(66),t(30)),h=t.n(m),g=t(24),w=t.n(g),y=t(19),O=t(25),j=t(1),x=Object(r.lazy)((function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,141))})),k=Object(r.lazy)((function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,144))})),E=Object(r.lazy)((function(){return t.e(5).then(t.bind(null,142))})),R=Object(r.lazy)((function(){return t.e(4).then(t.bind(null,143))})),N=v()();function I(){var e=Object(r.useState)([]),n=Object(f.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)({accountId:null,slug:null}),i=Object(f.a)(o,2),b=i[0],v=i[1],m=Object(r.useState)(""),g=Object(f.a)(m,2),I=g[0],q=g[1],B=Object(r.useState)([]),S=Object(f.a)(B,2),C=S[0],_=S[1];Object(r.useEffect)((function(){q(window.location.hash.includes("create")?"create":"existing"),P(),console.log("\u05d0\u05d4\u05d5\u05d1 \u05d0\u05ea \u05d4\u05de\u05dc\u05d0\u05db\u05d4")}),[]),Object(r.useEffect)((function(){b.accountId&&J()}),[b]),Object(r.useEffect)((function(){var e=null===t||void 0===t?void 0:t.filter((function(e){return!C.find((function(n){var t;return Number(null===n||void 0===n||null===(t=n.board)||void 0===t?void 0:t.value)===Number(null===e||void 0===e?void 0:e.id)}))}));c(e)}),[C]);var z=function(){var e=Object(p.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.columns.map((function(e){return null===e||void 0===e?void 0:e.value})),t=Object(d.a)({accountId:b.accountId},n),e.next=4,y.a(t);case 4:return e.sent,e.next=7,L([n]);case 7:r=e.sent,_([].concat(Object(l.a)(C),Object(l.a)(r)));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(s.a.mark((function e(n){var t,r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===(t=n.board)||void 0===t?void 0:t.value)){e.next=12;break}return r="query{\n          boards(ids:".concat(t.value,"){\n            columns{\n              id\n              type\n              title\n            }\n          }\n        }"),e.next=6,N.api(r);case 6:return a=e.sent,c=a.data.boards[0].columns,o=c.filter((function(e){return"Name"!==e.title&&!["pulse-updated","lookup"].includes(e.type)})).map((function(e){return{value:e.id,label:e.title}})),e.abrupt("return",o);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("getBoardColumns -> err",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.d(b.accountId);case 2:return n=e.sent,e.next=5,Promise.all(n);case 5:return n=e.sent,e.next=8,L(n);case 8:t=e.sent,_(t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(s.a.mark((function e(n){var t,r,a,c,o,i,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("getRestrictionLabels -> restrictions",n),e.prev=1,t=[],r=Object(u.a)(n),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=18;break}return c=a.value,o="query{\n          boards(ids:".concat(c.boardId||c.board.value,"){\n            name\n            columns(ids:").concat(JSON.stringify(c.columnIds),"){\n              id\n              title\n            }\n          }\n        }"),e.next=11,N.api(o);case 11:i=e.sent,console.log("getRestrictionLabels -> res",i),l=i.data.boards[0].name,d=i.data.boards[0].columns.map((function(e){return{value:e.id,label:e.title}})),t.push({board:{value:Number(c.boardId),label:l},columns:d,_id:c._id});case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.abrupt("return",t);case 29:e.prev=29,e.t1=e.catch(1),console.log("getRestrictionLabels -> error",e.t1);case 32:case"end":return e.stop()}}),e,null,[[1,29],[4,20,23,26]])})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"query{\n      account{\n        id\n        slug\n      }\n      boards{\n        name\n        id\n      }\n    }",e.next=3,N.api("query{\n      account{\n        id\n        slug\n      }\n      boards{\n        name\n        id\n      }\n    }");case 3:n=e.sent,v({accountId:Number(n.data.account.id),slug:n.data.account.slug}),t=n.data.boards,c(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(r.useMemo)((function(){if(null===t||void 0===t?void 0:t.length)return t.map((function(e){return{label:e.name,value:e.id}}))}),[t]),K=function(e){console.log("validateNewRestriction -> restriction",e);var n=null===e||void 0===e?void 0:e.board,t=n.label,r=n.value,a=e.columns;return!!(t&&r&&a.length)||(h.a.fire({title:"Couldn't add restriction",text:"some columns are missing",icon:"warning",returnFocus:!0,allowEnterKey:!0,allowEscapeKey:!0}),!1)};return a.a.createElement(r.Suspense,{fallback:a.a.createElement("div",{className:"loader-div"},a.a.createElement("div",{className:"loader"},a.a.createElement(w.a,null)))},a.a.createElement("div",{className:"App"},a.a.createElement(O.a,null,a.a.createElement(E,{currentNav:I,setCurrentNav:q}),a.a.createElement(j.c,null,a.a.createElement(j.a,{path:"/create",element:a.a.createElement(x,{boardsForDropdown:D,boards:t,monday:N,addNewRestriction:z,getBoardColumns:F,validateNewRestriction:K,slug:null===b||void 0===b?void 0:b.slug})}),a.a.createElement(j.a,{path:"/",element:a.a.createElement(k,{boardsForDropdown:D,getBoardColumns:F,account:null===b||void 0===b?void 0:b.accountId,restrictions:C,setRestrictions:_,validateNewRestriction:K,getRestrictions:J,monday:N})})),a.a.createElement(R,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,2,3]]]);
//# sourceMappingURL=main.fadae5d9.chunk.js.map