{"version":3,"sources":["components/Restriction.js","views/ExistingRestrictions.js"],"names":["Restriction","i","restriction","getBoardColumnsAndGroups","editRestriction","deleteRestriction","boardsForDropdown","onSetRestriction","useState","columnsForDropdown","setColumnsForDropdown","groupsForDropdown","setGroupsForDropdown","edit","delete","board","columns","isLoading","setIsLoading","useEffect","value","getColumnsAndGroups","a","groups","console","log","onSetLoadState","key","isLoad","className","options","placeholder","onChange","group","column","length","isDisabled","isClearable","isMulti","loading","onClick","e","kind","Button","kinds","TERTIARY","color","colors","NEGATIVE","ExistingRestrictions","account","restrictions","setRestrictions","validateNewRestriction","getRestrictions","monday","isLoadingRestrictions","setIsLoadingRestrictions","_getRestrictions","utils","newRestriction","data","execute","message","label","type","timeout","item","newRestrictions","filteredRestrictions","filter","rest","_id","map"],"mappings":"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","file":"static/js/6.a8bb8111.chunk.js","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Button from \"monday-ui-react-core/dist/Button\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\n\r\nimport Select from \"react-select\";\r\nexport default function Restriction({\r\n  i,\r\n  restriction,\r\n  getBoardColumnsAndGroups,\r\n  editRestriction,\r\n  deleteRestriction,\r\n  boardsForDropdown,\r\n  onSetRestriction,\r\n}) {\r\n  const [columnsForDropdown, setColumnsForDropdown] = useState([]);\r\n  const [groupsForDropdown, setGroupsForDropdown] = useState([]);\r\n  const [isLoading, setIsLoading] = useState({\r\n    edit: false,\r\n    delete: false,\r\n    board: false,\r\n    columns: false,\r\n  });\r\n  useEffect(() => {\r\n    if (restriction?.board?.value) {\r\n      getColumnsAndGroups();\r\n    }\r\n  }, [restriction]);\r\n  const getColumnsAndGroups = async () => {\r\n    const { columns, groups } = await getBoardColumnsAndGroups(restriction);\r\n    setColumnsForDropdown(columns);\r\n    setGroupsForDropdown(groups);\r\n    console.log(`getColumns -> columns`, columns);\r\n  };\r\n  const onSetLoadState = (key, isLoad) => {\r\n    setIsLoading({ ...isLoading, [key]: isLoad });\r\n  };\r\n\r\n  return restriction ? (\r\n    <div className=\"restriction\" key={i}>\r\n      <label className=\"restriction-label\">\r\n        Board\r\n        <Select\r\n          className=\"restriction-select\"\r\n          options={boardsForDropdown}\r\n          placeholder=\"Please choose a board\"\r\n          onChange={(board) => {\r\n            onSetRestriction(i, board, \"board\", onSetLoadState);\r\n          }}\r\n          value={restriction.board}\r\n          isLoading={isLoading?.board}\r\n        />\r\n      </label>\r\n      <label className=\"restriction-label\">\r\n        Group\r\n        <Select\r\n          className=\"restriction-select\"\r\n          options={groupsForDropdown}\r\n          placeholder=\"Please choose a board\"\r\n          onChange={(group) => {\r\n            onSetRestriction(i, group, \"group\", onSetLoadState);\r\n          }}\r\n          value={restriction.group}\r\n          isLoading={isLoading?.board}\r\n        />\r\n      </label>\r\n      <label className=\"restriction-label\">\r\n        Columns\r\n        <Select\r\n          className=\"restriction-select\"\r\n          placeholder=\"Please choose restricting columns\"\r\n          onChange={(column) => {\r\n            onSetRestriction(i, column, \"columns\", onSetLoadState);\r\n          }}\r\n          options={columnsForDropdown}\r\n          value={restriction?.columns}\r\n          isLoading={isLoading?.columns || !columnsForDropdown?.length}\r\n          isDisabled={isLoading?.columns || !columnsForDropdown?.length}\r\n          isClearable\r\n          isMulti\r\n        />\r\n      </label>\r\n      <div className=\"button-div\">\r\n        <Button\r\n          loading={isLoading?.edit}\r\n          onClick={(e) => {\r\n            editRestriction(i, restriction, onSetLoadState);\r\n          }}\r\n        >\r\n          Update\r\n        </Button>\r\n        <Button\r\n          loading={isLoading?.delete}\r\n          kind={Button.kinds.TERTIARY}\r\n          color={Button.colors.NEGATIVE}\r\n          className=\"add-button\"\r\n          onClick={(e) => {\r\n            deleteRestriction(i, onSetLoadState);\r\n          }}\r\n        >\r\n          Delete\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className=\"loader-div\">\r\n      <div className=\"loader\">\r\n        <Loader />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Restriction from \"../components/Restriction\";\r\nimport * as utils from \"../services/utils\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\n\r\nexport default function ExistingRestrictions({\r\n  getBoardColumnsAndGroups,\r\n  account,\r\n  boardsForDropdown,\r\n  restrictions,\r\n  setRestrictions,\r\n  validateNewRestriction,\r\n  getRestrictions,\r\n  monday,\r\n}) {\r\n  const [isLoadingRestrictions, setIsLoadingRestrictions] = useState(true);\r\n  useEffect(() => {\r\n    _getRestrictions();\r\n  }, [account]);\r\n\r\n  const _getRestrictions = async () => {\r\n    if (account) {\r\n      await getRestrictions();\r\n      setIsLoadingRestrictions(false);\r\n    }\r\n  };\r\n\r\n  const editRestriction = async (i, restriction, onSetLoadState) => {\r\n    console.log(`editRestriction -> i, restriction,`, i, restriction);\r\n    onSetLoadState(\"edit\", true);\r\n    if (validateNewRestriction(restriction, false)) {\r\n      const newRestriction = (await utils.editRestriction(restriction, account))\r\n        .data;\r\n      restrictions[i] = newRestriction;\r\n      setRestrictions(restrictions);\r\n      monday.execute(\"notice\", {\r\n        message: `the restriction on ${restriction.board.label} was successfully updated!`,\r\n        type: \"success\", // or \"error\" (red), or \"info\" (blue)\r\n        timeout: 10000,\r\n      });\r\n    } else {\r\n      monday.execute(\"notice\", {\r\n        message: `Please choose columns to restrict by!`,\r\n        type: \"error\", // or \"error\" (red), or \"info\" (blue)\r\n        timeout: 10000,\r\n      });\r\n    }\r\n    onSetLoadState(\"edit\", false);\r\n  };\r\n\r\n  const onSetRestriction = (i, item, kind, onSetLoadState) => {\r\n    console.log(`onSetRestriction -> i, item, kind`, i, item, kind);\r\n    if (kind === \"board\") {\r\n      onSetLoadState(\"board\", true);\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { board: item, columns: [] };\r\n      setRestrictions([...newRestrictions]);\r\n      onSetLoadState(\"board\", false);\r\n    } else if (kind === \"group\") {\r\n      onSetLoadState(\"group\", true);\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { ...restrictions[i], group: item };\r\n      setRestrictions([...newRestrictions]);\r\n      onSetLoadState(\"group\", false);\r\n    } else if (kind === \"columns\") {\r\n      onSetLoadState(\"columns\", true);\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { ...restrictions[i], columns: item };\r\n      setRestrictions([...newRestrictions]);\r\n      onSetLoadState(\"columns\", false);\r\n    }\r\n  };\r\n\r\n  const deleteRestriction = async (i, onSetLoadState) => {\r\n    onSetLoadState(\"delete\", true);\r\n    const restriction = restrictions[i];\r\n    const deletedRest = await utils.deleteRestriction(restriction);\r\n    const filteredRestrictions = restrictions.filter(\r\n      (rest) => rest._id !== restriction._id\r\n    );\r\n    onSetLoadState(\"delete\", false);\r\n    setRestrictions([...filteredRestrictions]);\r\n  };\r\n  console.log(`restrictions`, restrictions);\r\n\r\n  return (\r\n    <div className=\"existing-restrictions\">\r\n      {isLoadingRestrictions ? (\r\n        <div className=\"loader-div\">\r\n          <div className=\"loader\">\r\n            <Loader />\r\n          </div>\r\n          <p>Loading Existing Restrictions...</p>\r\n        </div>\r\n      ) : restrictions?.length ? (\r\n        restrictions?.map((restriction, i) => (\r\n          <Restriction\r\n            key={i}\r\n            i={i}\r\n            restriction={restriction}\r\n            getBoardColumnsAndGroups={getBoardColumnsAndGroups}\r\n            editRestriction={editRestriction}\r\n            deleteRestriction={deleteRestriction}\r\n            boardsForDropdown={boardsForDropdown}\r\n            onSetRestriction={onSetRestriction}\r\n          />\r\n        ))\r\n      ) : (\r\n        <div className=\"no-existing\">\r\n          <p>There's no restrictions yet...</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}