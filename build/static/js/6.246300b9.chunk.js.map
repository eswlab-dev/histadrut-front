{"version":3,"sources":["components/Restriction.js","views/ExistingRestrictions.js"],"names":["Restriction","i","restriction","getBoardColumnsAndGroups","editRestriction","deleteRestriction","boardsForDropdown","onSetRestriction","console","log","useState","columnsForDropdown","setColumnsForDropdown","groupsForDropdown","setGroupsForDropdown","edit","delete","board","columns","isLoading","setIsLoading","useEffect","value","getColumnsAndGroups","a","groups","onSetLoadState","key","isLoad","className","options","placeholder","onChange","group","column","length","isDisabled","isClearable","isMulti","loading","onClick","e","kind","Button","kinds","TERTIARY","color","colors","NEGATIVE","ExistingRestrictions","account","restrictions","setRestrictions","validateNewRestriction","getRestrictions","monday","isLoadingRestrictions","setIsLoadingRestrictions","_getRestrictions","utils","newRestriction","execute","message","label","type","timeout","item","newRestrictions","filteredRestrictions","filter","rest","_id","map"],"mappings":"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","file":"static/js/6.246300b9.chunk.js","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Button from \"monday-ui-react-core/dist/Button\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\n\r\nimport Select from \"react-select\";\r\nexport default function Restriction({\r\n  i,\r\n  restriction,\r\n  getBoardColumnsAndGroups,\r\n  editRestriction,\r\n  deleteRestriction,\r\n  boardsForDropdown,\r\n  onSetRestriction,\r\n}) {\r\n  console.log(`restriction`, restriction);\r\n  const [columnsForDropdown, setColumnsForDropdown] = useState([]);\r\n  const [groupsForDropdown, setGroupsForDropdown] = useState([]);\r\n  const [isLoading, setIsLoading] = useState({\r\n    edit: false,\r\n    delete: false,\r\n    board: false,\r\n    columns: false,\r\n  });\r\n  useEffect(() => {\r\n    if (restriction?.board?.value) {\r\n      getColumnsAndGroups();\r\n    }\r\n  }, [restriction]);\r\n  const getColumnsAndGroups = async () => {\r\n    const { columns, groups } = await getBoardColumnsAndGroups(restriction);\r\n    setColumnsForDropdown(columns);\r\n    setGroupsForDropdown(groups);\r\n    // console.log(`getColumns -> columns`, columns);\r\n  };\r\n  const onSetLoadState = (key, isLoad) => {\r\n    setIsLoading({ ...isLoading, [key]: isLoad });\r\n  };\r\n  // const onEditRestriction = async () => {\r\n\r\n  // }\r\n\r\n  return restriction ? (\r\n    <div className=\"restriction\" key={i}>\r\n      <label className=\"restriction-label\">\r\n        Board\r\n        <Select\r\n          className=\"restriction-select\"\r\n          options={boardsForDropdown}\r\n          placeholder=\"Please choose a board\"\r\n          onChange={(board) => {\r\n            onSetRestriction(i, board, \"board\", onSetLoadState);\r\n          }}\r\n          value={restriction.board}\r\n          isLoading={isLoading?.board}\r\n        />\r\n      </label>\r\n      <label className=\"restriction-label\">\r\n        Group\r\n        <Select\r\n          className=\"restriction-select\"\r\n          options={groupsForDropdown}\r\n          placeholder=\"Please choose a board\"\r\n          onChange={(group) => {\r\n            onSetRestriction(i, group, \"group\", onSetLoadState);\r\n          }}\r\n          value={restriction.group}\r\n          isLoading={isLoading?.board}\r\n        />\r\n      </label>\r\n      <label className=\"restriction-label\">\r\n        Columns\r\n        <Select\r\n          className=\"restriction-select\"\r\n          placeholder=\"Please choose restricting columns\"\r\n          onChange={(column) => {\r\n            onSetRestriction(i, column, \"columns\", onSetLoadState);\r\n          }}\r\n          options={columnsForDropdown}\r\n          value={restriction?.columns}\r\n          isLoading={isLoading?.columns || !columnsForDropdown?.length}\r\n          isDisabled={isLoading?.columns || !columnsForDropdown?.length}\r\n          isClearable\r\n          isMulti\r\n        />\r\n      </label>\r\n      <div className=\"button-div\">\r\n        <Button\r\n          loading={isLoading?.edit}\r\n          onClick={(e) => {\r\n            editRestriction(i, restriction, onSetLoadState);\r\n          }}\r\n        >\r\n          Update\r\n        </Button>\r\n        <Button\r\n          loading={isLoading?.delete}\r\n          kind={Button.kinds.TERTIARY}\r\n          color={Button.colors.NEGATIVE}\r\n          className=\"add-button\"\r\n          onClick={(e) => {\r\n            deleteRestriction(i, onSetLoadState);\r\n          }}\r\n        >\r\n          Delete\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className=\"loader-div\">\r\n      <div className=\"loader\">\r\n        <Loader />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Restriction from \"../components/Restriction\";\r\nimport * as utils from \"../services/utils\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\n\r\nexport default function ExistingRestrictions({\r\n  getBoardColumnsAndGroups,\r\n  account,\r\n  boardsForDropdown,\r\n  restrictions,\r\n  setRestrictions,\r\n  validateNewRestriction,\r\n  getRestrictions,\r\n  monday,\r\n}) {\r\n  console.log(`restrictions`, restrictions);\r\n  const [isLoadingRestrictions, setIsLoadingRestrictions] = useState(true);\r\n  useEffect(() => {\r\n    _getRestrictions();\r\n  }, [account]);\r\n\r\n  const _getRestrictions = async () => {\r\n    if (account) {\r\n      await getRestrictions();\r\n      setIsLoadingRestrictions(false);\r\n    }\r\n  };\r\n\r\n  const editRestriction = async (i, restriction, onSetLoadState) => {\r\n    console.log(`editRestriction -> i, restriction,`, i, restriction);\r\n    onSetLoadState(\"edit\", true);\r\n    if (validateNewRestriction(restriction, false)) {\r\n      const newRestriction = await utils.editRestriction(restriction, account);\r\n      // const newRestriction = await utils.editRestriction(restriction, account).data;\r\n      console.log(`editRestriction -> newRestriction`, newRestriction);\r\n      restrictions[i] = newRestriction;\r\n      setRestrictions(restrictions);\r\n      monday.execute(\"notice\", {\r\n        message: `the restriction on ${restriction.board.label} was successfully updated!`,\r\n        type: \"success\", // or \"error\" (red), or \"info\" (blue)\r\n        timeout: 10000,\r\n      });\r\n    } else {\r\n      monday.execute(\"notice\", {\r\n        message: `Please choose columns to restrict by!`,\r\n        type: \"error\", // or \"error\" (red), or \"info\" (blue)\r\n        timeout: 10000,\r\n      });\r\n    }\r\n    onSetLoadState(\"edit\", false);\r\n  };\r\n\r\n  const onSetRestriction = (i, item, kind, onSetLoadState) => {\r\n    console.log(`onSetRestriction -> i, item, kind`, i, item, kind);\r\n    onSetLoadState(kind, true);\r\n    if (kind === \"board\") {\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { board: item, columns: [] };\r\n      setRestrictions([...newRestrictions]);\r\n      // onSetLoadState(\"board\", false);\r\n    } else if (kind === \"group\") {\r\n      // onSetLoadState(\"group\", true);\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { ...restrictions[i], group: item };\r\n      setRestrictions([...newRestrictions]);\r\n      // onSetLoadState(\"group\", false);\r\n    } else if (kind === \"columns\") {\r\n      // onSetLoadState(\"columns\", true);\r\n      const newRestrictions = restrictions;\r\n      newRestrictions[i] = { ...restrictions[i], columns: item };\r\n      setRestrictions([...newRestrictions]);\r\n    }\r\n    onSetLoadState(kind, false);\r\n  };\r\n\r\n  const deleteRestriction = async (i, onSetLoadState) => {\r\n    onSetLoadState(\"delete\", true);\r\n    const restriction = restrictions[i];\r\n    const deletedRest = await utils.deleteRestriction(restriction);\r\n    const filteredRestrictions = restrictions.filter(\r\n      (rest) => rest._id !== restriction._id\r\n    );\r\n    onSetLoadState(\"delete\", false);\r\n    setRestrictions([...filteredRestrictions]);\r\n  };\r\n  console.log(`restrictions`, restrictions);\r\n\r\n  return (\r\n    <div className=\"existing-restrictions\">\r\n      {isLoadingRestrictions ? (\r\n        <div className=\"loader-div\">\r\n          <div className=\"loader\">\r\n            <Loader />\r\n          </div>\r\n          <p>Loading Existing Restrictions...</p>\r\n        </div>\r\n      ) : restrictions?.length ? (\r\n        restrictions?.map((restriction, i) => (\r\n          <Restriction\r\n            key={i}\r\n            i={i}\r\n            restriction={restriction}\r\n            getBoardColumnsAndGroups={getBoardColumnsAndGroups}\r\n            editRestriction={editRestriction}\r\n            deleteRestriction={deleteRestriction}\r\n            boardsForDropdown={boardsForDropdown}\r\n            onSetRestriction={onSetRestriction}\r\n          />\r\n        ))\r\n      ) : (\r\n        <div className=\"no-existing\">\r\n          <p>There's no restrictions yet...</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}