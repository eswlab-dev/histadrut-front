(this["webpackJsonpmonday-integration-quickstart-app"]=this["webpackJsonpmonday-integration-quickstart-app"]||[]).push([[6],{144:function(e,t,n){"use strict";n.r(t);var a=n(23),o=n(22),r=n(2),c=n.n(r),i=n(6),s=n(5),l=n(0),u=n.n(l),d=n(28),m=n(100),v=n.n(m),b=n(24),p=n.n(b),f=n(104);function g(e){var t=e.i,n=e.restriction,o=e.getBoardColumnsAndGroups,r=e.editRestriction,m=e.deleteRestriction,b=e.boardsForDropdown,g=e.onSetRestriction,E=Object(l.useState)([]),h=Object(s.a)(E,2),j=h[0],O=h[1],k=Object(l.useState)([]),N=Object(s.a)(k,2),x=N[0],w=N[1],y=Object(l.useState)({edit:!1,delete:!1,board:!1,columns:!1}),R=Object(s.a)(y,2),C=R[0],S=R[1];Object(l.useEffect)((function(){var e;(null===n||void 0===n||null===(e=n.board)||void 0===e?void 0:e.value)&&A()}),[n]);var A=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n);case 2:t=e.sent,a=t.columns,r=t.groups,O(a),w(r),console.log("getColumns -> columns",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e,t){S(Object(a.a)(Object(a.a)({},C),{},Object(d.a)({},e,t)))};return n?u.a.createElement("div",{className:"restriction",key:t},u.a.createElement("label",{className:"restriction-label"},"Board",u.a.createElement(f.a,{className:"restriction-select",options:b,placeholder:"Please choose a board",onChange:function(e){g(t,e,"board",D)},value:n.board,isLoading:null===C||void 0===C?void 0:C.board})),u.a.createElement("label",{className:"restriction-label"},"Group",u.a.createElement(f.a,{className:"restriction-select",options:x,placeholder:"Please choose a board",onChange:function(e){g(t,e,"group",D)},value:n.group,isLoading:null===C||void 0===C?void 0:C.board})),u.a.createElement("label",{className:"restriction-label"},"Columns",u.a.createElement(f.a,{className:"restriction-select",placeholder:"Please choose restricting columns",onChange:function(e){g(t,e,"columns",D)},options:j,value:null===n||void 0===n?void 0:n.columns,isLoading:(null===C||void 0===C?void 0:C.columns)||!(null===j||void 0===j?void 0:j.length),isDisabled:(null===C||void 0===C?void 0:C.columns)||!(null===j||void 0===j?void 0:j.length),isClearable:!0,isMulti:!0})),u.a.createElement("div",{className:"button-div"},u.a.createElement(v.a,{loading:null===C||void 0===C?void 0:C.edit,onClick:function(e){r(t,n,D)}},"Update"),u.a.createElement(v.a,{loading:null===C||void 0===C?void 0:C.delete,kind:v.a.kinds.TERTIARY,color:v.a.colors.NEGATIVE,className:"add-button",onClick:function(e){m(t,D)}},"Delete"))):u.a.createElement("div",{className:"loader-div"},u.a.createElement("div",{className:"loader"},u.a.createElement(p.a,null)))}var E=n(19);function h(e){var t=e.getBoardColumnsAndGroups,n=e.account,r=e.boardsForDropdown,d=e.restrictions,m=e.setRestrictions,v=e.validateNewRestriction,b=e.getRestrictions,f=e.monday,h=Object(l.useState)(!0),j=Object(s.a)(h,2),O=j[0],k=j[1];Object(l.useEffect)((function(){N()}),[n]);var N=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,b();case 3:k(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(c.a.mark((function e(t,a,o){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("editRestriction -> i, restriction,",t,a),o("edit",!0),!v(a,!1)){e.next=11;break}return e.next=5,E.c(a,n);case 5:r=e.sent.data,d[t]=r,m(d),f.execute("notice",{message:"the restriction on ".concat(a.board.label," was successfully updated!"),type:"success",timeout:1e4}),e.next=12;break;case 11:f.execute("notice",{message:"Please choose columns to restrict by!",type:"error",timeout:1e4});case 12:o("edit",!1);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(e,t,n,r){if(console.log("onSetRestriction -> i, item, kind",e,t,n),"board"===n){r("board",!0);var c=d;c[e]={board:t,columns:[]},m(Object(o.a)(c)),r("board",!1)}else if("group"===n){r("group",!0);var i=d;i[e]=Object(a.a)(Object(a.a)({},d[e]),{},{group:t}),m(Object(o.a)(i)),r("group",!1)}else if("columns"===n){r("columns",!0);var s=d;s[e]=Object(a.a)(Object(a.a)({},d[e]),{},{columns:t}),m(Object(o.a)(s)),r("columns",!1)}},y=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("delete",!0),a=d[t],e.next=4,E.b(a);case 4:e.sent,r=d.filter((function(e){return e._id!==a._id})),n("delete",!1),m(Object(o.a)(r));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return console.log("restrictions",d),u.a.createElement("div",{className:"existing-restrictions"},O?u.a.createElement("div",{className:"loader-div"},u.a.createElement("div",{className:"loader"},u.a.createElement(p.a,null)),u.a.createElement("p",null,"Loading Existing Restrictions...")):(null===d||void 0===d?void 0:d.length)?null===d||void 0===d?void 0:d.map((function(e,n){return u.a.createElement(g,{key:n,i:n,restriction:e,getBoardColumnsAndGroups:t,editRestriction:x,deleteRestriction:y,boardsForDropdown:r,onSetRestriction:w})})):u.a.createElement("div",{className:"no-existing"},u.a.createElement("p",null,"There's no restrictions yet...")))}n.d(t,"default",(function(){return h}))}}]);
//# sourceMappingURL=6.a8bb8111.chunk.js.map