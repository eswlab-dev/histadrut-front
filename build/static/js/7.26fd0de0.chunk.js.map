{"version":3,"sources":["views/RestrictionCreator.js"],"names":["RestrictionCreator","monday","boardsForDropdown","addNewRestriction","getBoardColumns","validateNewRestriction","slug","console","log","useState","boardColumns","setBoardColumns","board","column","button","isLoading","setIsLoading","value","label","columns","restriction","setRestriction","useEffect","onSetColumns","a","length","Swal","fire","title","html","icon","resetSelect","onAddNewRestriction","execute","message","type","timeout","onSetRestriction","isBoard","item","className","placeholder","options","onChange","isDisabled","isClearable","isMulti","size","Button","sizes","LARGE","loading","onClick","e","disabled"],"mappings":"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","file":"static/js/7.26fd0de0.chunk.js","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Button from \"monday-ui-react-core/dist/Button\";\r\nimport * as utils from \"../services/utils\";\r\nimport Select from \"react-select\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nexport default function RestrictionCreator({\r\n  monday,\r\n  boardsForDropdown,\r\n  addNewRestriction,\r\n  getBoardColumns,\r\n  validateNewRestriction,\r\n  slug,\r\n}) {\r\n  console.log(`slug`, slug);\r\n  const [boardColumns, setBoardColumns] = useState();\r\n  const [isLoading, setIsLoading] = useState({\r\n    board: false,\r\n    column: false,\r\n    button: false,\r\n  });\r\n\r\n  const [restriction, setRestriction] = useState({\r\n    board: { value: null, label: \"Choose a board to restrict\" },\r\n    columns: [],\r\n  });\r\n  useEffect(() => {\r\n    if (restriction.board.value !== null) onSetColumns();\r\n  }, [restriction.board]);\r\n  const onSetColumns = async () => {\r\n    setIsLoading({ ...isLoading, column: true });\r\n    const columns = await getBoardColumns(restriction);\r\n    if (!columns?.length) {\r\n      Swal.fire({\r\n        title: \"Oops!\",\r\n        html: `<p>It looks like you dont have any columns in <a href=\"https://${slug}.monday.com/boards/${restriction.board.value}\" target=\"_blank\">${restriction?.board?.label}</a>!</p> <p> Please choose a different board, or add columns on that board.</p>`,\r\n        icon: \"error\",\r\n      });\r\n      resetSelect();\r\n    }\r\n    setIsLoading({ ...isLoading, column: false });\r\n    setBoardColumns(columns);\r\n  };\r\n  const onAddNewRestriction = async () => {\r\n    if (validateNewRestriction(restriction)) {\r\n      setIsLoading({ ...isLoading, button: true });\r\n      await addNewRestriction(restriction);\r\n      setIsLoading({ ...isLoading, button: false });\r\n      resetSelect();\r\n      monday.execute(\"notice\", {\r\n        message: `congrats! New restriction was created at ${restriction.board.label}!`,\r\n        type: \"success\", // or \"error\" (red), or \"info\" (blue)\r\n        timeout: 10000,\r\n      });\r\n    } else console.log(\"not valid\");\r\n  };\r\n  const resetSelect = () => {\r\n    setRestriction({\r\n      board: { value: null, label: \"Choose a board to restrict\" },\r\n      columns: [],\r\n    });\r\n  };\r\n\r\n  const onSetRestriction = (isBoard, item) => {\r\n    if (isBoard) {\r\n      setRestriction({ ...restriction, board: item });\r\n    } else {\r\n      setRestriction({ ...restriction, columns: item });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"create-restriction\">\r\n      <div className=\"selects\">\r\n        <label className=\"restriction-label\">\r\n          Board\r\n          {isLoading.board ? (\r\n            <div className=\"small-loader\">\r\n              <Loader />\r\n            </div>\r\n          ) : (\r\n            <Select\r\n              isLoading={isLoading.board}\r\n              placeholder=\"Choose board to restrict\"\r\n              className=\"restriction-select\"\r\n              options={boardsForDropdown}\r\n              onChange={(board) => onSetRestriction(true, board)}\r\n              value={restriction.board}\r\n            />\r\n          )}\r\n        </label>\r\n        <label\r\n          className=\"restriction-label\"\r\n          title={boardColumns?.length ? \"\" : \"Please choose a board first!\"}\r\n        >\r\n          Columns\r\n          <Select\r\n            placeholder=\"Choose column to restrict\"\r\n            className=\"restriction-select\"\r\n            onChange={(column) => onSetRestriction(false, column)}\r\n            options={boardColumns}\r\n            isDisabled={!boardColumns?.length}\r\n            value={restriction?.columns}\r\n            isClearable\r\n            isMulti\r\n            isLoading={isLoading.column}\r\n          />\r\n        </label>\r\n      </div>\r\n      <div className=\"button-div\">\r\n        <Button\r\n          size={Button.sizes.LARGE}\r\n          loading={isLoading.button}\r\n          onClick={(e) => {\r\n            onAddNewRestriction(restriction);\r\n          }}\r\n          disabled={\r\n            !restriction?.board?.label ||\r\n            !restriction?.board?.value ||\r\n            !restriction?.columns?.length\r\n          }\r\n        >\r\n          Create\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}