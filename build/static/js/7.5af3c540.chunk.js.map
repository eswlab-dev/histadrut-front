{"version":3,"sources":["views/RestrictionCreator.js"],"names":["RestrictionCreator","monday","boardsForDropdown","addNewRestriction","getBoardColumns","validateNewRestriction","useState","boardColumns","setBoardColumns","board","column","button","isLoading","setIsLoading","value","label","columns","restriction","setRestriction","useEffect","onSetColumns","a","onAddNewRestriction","resetSelect","console","log","onSetRestriction","isBoard","item","className","placeholder","options","onChange","title","length","isDisabled","isClearable","isMulti","size","Button","sizes","LARGE","loading","onClick","e","disabled"],"mappings":"2TAMe,SAASA,EAAT,GAMZ,EALDC,OAKE,IAAD,MAJDC,EAIC,EAJDA,kBACAC,EAGC,EAHDA,kBACAC,EAEC,EAFDA,gBACAC,EACC,EADDA,uBACC,EACuCC,qBADvC,mBACMC,EADN,KACoBC,EADpB,OAEiCF,mBAAS,CACzCG,OAAO,EACPC,QAAQ,EACRC,QAAQ,IALT,mBAEMC,EAFN,KAEiBC,EAFjB,OAQqCP,mBAAS,CAC7CG,MAAO,CAAEK,MAAO,KAAMC,MAAO,8BAC7BC,QAAS,KAVV,mBAQMC,EARN,KAQmBC,EARnB,KAYDC,qBAAU,WACRC,MACC,CAACH,EAAYR,QAChB,IAAMW,EAAY,uCAAG,4BAAAC,EAAA,6DACnBR,EAAa,2BAAKD,GAAN,IAAiBF,QAAQ,KADlB,SAEGN,EAAgBa,GAFnB,OAEbD,EAFa,OAGnBH,EAAa,2BAAKD,GAAN,IAAiBF,QAAQ,KACrCF,EAAgBQ,GAJG,2CAAH,qDAMZM,EAAmB,uCAAG,sBAAAD,EAAA,0DACtBhB,EAAuBY,GADD,uBAExBJ,EAAa,2BAAKD,GAAN,IAAiBD,QAAQ,KAFb,SAGlBR,EAAkBc,GAHA,OAIxBJ,EAAa,2BAAKD,GAAN,IAAiBD,QAAQ,KACrCY,IALwB,sBAMnBC,QAAQC,IAAI,aANO,2CAAH,qDAQnBF,EAAc,WAClBL,EAAe,CACbT,MAAO,CAAEK,MAAO,KAAMC,MAAO,8BAC7BC,QAAS,MAIPU,EAAmB,SAACC,EAASC,GAE/BV,EADES,EACa,2BAAKV,GAAN,IAAmBR,MAAOmB,IAEzB,2BAAKX,GAAN,IAAmBD,QAASY,MAK9C,OAFAJ,QAAQC,IAAR,mBAAgCb,EAAUD,QAGxC,yBAAKkB,UAAU,sBACb,yBAAKA,UAAU,WACb,2BAAOA,UAAU,qBAAjB,QAEGjB,EAAUH,MACT,yBAAKoB,UAAU,gBACb,kBAAC,IAAD,OAGF,kBAAC,IAAD,CACEjB,UAAWA,EAAUH,MACrBqB,YAAY,2BACZD,UAAU,qBACVE,QAAS7B,EACT8B,SAAU,SAACvB,GAAD,OAAWiB,GAAiB,EAAMjB,IAC5CK,MAAOG,EAAYR,SAIzB,2BACEoB,UAAU,oBACVI,OAAmB,OAAZ1B,QAAY,IAAZA,OAAA,EAAAA,EAAc2B,QAAS,GAAK,gCAFrC,UAKE,kBAAC,IAAD,CACEJ,YAAY,4BACZD,UAAU,qBACVG,SAAU,SAACtB,GAAD,OAAYgB,GAAiB,EAAOhB,IAC9CqB,QAASxB,EACT4B,aAAY,OAAC5B,QAAD,IAACA,OAAD,EAACA,EAAc2B,QAC3BpB,MAAK,OAAEG,QAAF,IAAEA,OAAF,EAAEA,EAAaD,QACpBoB,aAAW,EACXC,SAAO,EACPzB,UAAWA,EAAUF,WAI3B,yBAAKmB,UAAU,cACb,kBAAC,IAAD,CACES,KAAMC,IAAOC,MAAMC,MACnBC,QAAS9B,EAAUD,OACnBgC,QAAS,SAACC,GACRtB,EAAoBL,IAEtB4B,WACE,OAAC5B,QAAD,IAACA,GAAD,UAACA,EAAaR,aAAd,aAAC,EAAoBM,UACrB,OAACE,QAAD,IAACA,GAAD,UAACA,EAAaR,aAAd,aAAC,EAAoBK,UACrB,OAACG,QAAD,IAACA,GAAD,UAACA,EAAaD,eAAd,aAAC,EAAsBkB,SAT3B","file":"static/js/7.5af3c540.chunk.js","sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport Button from \"monday-ui-react-core/dist/Button\";\r\nimport * as utils from \"../services/utils\";\r\nimport Select from \"react-select\";\r\nimport Loader from \"monday-ui-react-core/dist/Loader\";\r\n\r\nexport default function RestrictionCreator({\r\n  monday,\r\n  boardsForDropdown,\r\n  addNewRestriction,\r\n  getBoardColumns,\r\n  validateNewRestriction,\r\n}) {\r\n  const [boardColumns, setBoardColumns] = useState();\r\n  const [isLoading, setIsLoading] = useState({\r\n    board: false,\r\n    column: false,\r\n    button: false,\r\n  });\r\n\r\n  const [restriction, setRestriction] = useState({\r\n    board: { value: null, label: \"Choose a board to restrict\" },\r\n    columns: [],\r\n  });\r\n  useEffect(() => {\r\n    onSetColumns();\r\n  }, [restriction.board]);\r\n  const onSetColumns = async () => {\r\n    setIsLoading({ ...isLoading, column: true });\r\n    const columns = await getBoardColumns(restriction);\r\n    setIsLoading({ ...isLoading, column: false });\r\n    setBoardColumns(columns);\r\n  };\r\n  const onAddNewRestriction = async () => {\r\n    if (validateNewRestriction(restriction)) {\r\n      setIsLoading({ ...isLoading, button: true });\r\n      await addNewRestriction(restriction);\r\n      setIsLoading({ ...isLoading, button: false });\r\n      resetSelect();\r\n    } else console.log(\"not valid\");\r\n  };\r\n  const resetSelect = () => {\r\n    setRestriction({\r\n      board: { value: null, label: \"Choose a board to restrict\" },\r\n      columns: [],\r\n    });\r\n  };\r\n\r\n  const onSetRestriction = (isBoard, item) => {\r\n    if (isBoard) {\r\n      setRestriction({ ...restriction, board: item });\r\n    } else {\r\n      setRestriction({ ...restriction, columns: item });\r\n    }\r\n  };\r\n  console.log(`isLoading.button`, isLoading.button);\r\n\r\n  return (\r\n    <div className=\"create-restriction\">\r\n      <div className=\"selects\">\r\n        <label className=\"restriction-label\">\r\n          Board\r\n          {isLoading.board ? (\r\n            <div className=\"small-loader\">\r\n              <Loader />\r\n            </div>\r\n          ) : (\r\n            <Select\r\n              isLoading={isLoading.board}\r\n              placeholder=\"Choose board to restrict\"\r\n              className=\"restriction-select\"\r\n              options={boardsForDropdown}\r\n              onChange={(board) => onSetRestriction(true, board)}\r\n              value={restriction.board}\r\n            />\r\n          )}\r\n        </label>\r\n        <label\r\n          className=\"restriction-label\"\r\n          title={boardColumns?.length ? \"\" : \"Please choose a board first!\"}\r\n        >\r\n          Columns\r\n          <Select\r\n            placeholder=\"Choose column to restrict\"\r\n            className=\"restriction-select\"\r\n            onChange={(column) => onSetRestriction(false, column)}\r\n            options={boardColumns}\r\n            isDisabled={!boardColumns?.length}\r\n            value={restriction?.columns}\r\n            isClearable\r\n            isMulti\r\n            isLoading={isLoading.column}\r\n          />\r\n        </label>\r\n      </div>\r\n      <div className=\"button-div\">\r\n        <Button\r\n          size={Button.sizes.LARGE}\r\n          loading={isLoading.button}\r\n          onClick={(e) => {\r\n            onAddNewRestriction(restriction);\r\n          }}\r\n          disabled={\r\n            !restriction?.board?.label ||\r\n            !restriction?.board?.value ||\r\n            !restriction?.columns?.length\r\n          }\r\n        >\r\n          Create\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}